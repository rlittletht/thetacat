<Window x:Name="window" x:Class="Thetacat.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Thetacat"
        xmlns:ui="clr-namespace:Thetacat.UI"
        xmlns:controls="clr-namespace:Thetacat.Controls"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800" Closing="OnClosing" Loaded="OnLoaded">
    <Window.Resources>
        <local:MathConverter x:Key="MathConverter" />
    </Window.Resources>
    <DockPanel>
        <!--VerticalAlignment="Stretch">-->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="T_ools">
                <MenuItem Header="_Import" Click="LaunchImport" />
                <MenuItem Header="_Migration" Click="LaunchMigration" />
                <MenuItem Header="Meta_tags" Click="ManageMetatags" />
                <MenuItem Header="Options" Click="LaunchOptions" />
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Header="App log monitor" Click="ToggleAppLog" />
                <MenuItem Header="Async log monitor" Click="ToggleAsyncLog" />
                <MenuItem Header="Large pictures" Click="SelectLargePreview" />
                <MenuItem Header="Medium pictures" Click="SelectMediumPreview" />
                <MenuItem Header="Small pictures" Click="SelectSmallPreview" />
                <Separator/>
                <MenuItem Header="Show _Cache Info" Click="ShowCacheInfo"/>
                <MenuItem Header="Timeline" Name="TimelineMenu">
                    <MenuItem Header="Creation date" IsCheckable="True" Click="ChoosemMediaDateTimeline" IsChecked="{Binding Path=IsMediaDateTimeline, Mode=OneWay}"/>
                    <MenuItem Header="Import date" IsCheckable="True" Click="ChooseImportDateTimeline" IsChecked="{Binding Path=IsImportDateTimeline, Mode=OneWay}"/>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Debug">
                <MenuItem Header="Test Progress" Click="TestProgressDialog" />
                <MenuItem Header="Test QueueBackground Process (5 Second)" Click="StartBackground5s" />
                <MenuItem Header="Test QueueBackground Process (1m Second)" Click="StartBackground1m" />
                <MenuItem Header="Test Indeterminate Background Process (10s Second)" Click="StartBackground10sIndet" />
            </MenuItem>
        </Menu>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="7*" />
                <RowDefinition Height="3*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Jump to date:" Grid.Column="0"/>
                <TextBox Text="{Binding Path=JumpDate}" Width="128" Grid.Column="1"/>
                <Button Content="Jump" Click="JumpToDate" Grid.Column="2"/>
                <TextBlock Text="{Binding Path=WindowDateRange}" Grid.Column="3" HorizontalAlignment="Right"/>
            </Grid>
            <ui:MediaExplorer x:Name="Explorer" Grid.Row="1" />
            <ListView Name="CatalogView" Grid.Row="2" MouseDoubleClick="HandleDoubleClick">
                <ListView.View>
                    <GridView>
                        <GridView.Columns>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=ID}">
                                <GridViewColumnHeader Tag="Key" Click="SortType" Content="Key" />
                            </GridViewColumn>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=VirtualPath}">
                                <GridViewColumnHeader Tag="VirtualPath" Click="SortType" Content="VirtualPath" />
                            </GridViewColumn>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=State}">
                                <GridViewColumnHeader Tag="State" Click="SortType" Content="State" />
                            </GridViewColumn>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=CacheStatus}">
                                <GridViewColumnHeader Tag="Cached" Click="SortType" Content="Cached" />
                            </GridViewColumn>
                        </GridView.Columns>
                    </GridView>
                </ListView.View>
            </ListView>
            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="192" />
                    <ColumnDefinition Width="10*" />
                </Grid.ColumnDefinitions>
                <!-- Must make the background transparent in order to have the hittesting hit the entire region-->
                <Grid Grid.Column="0" PreviewMouseDown="HandleSpinnerMouseDown" Background="Transparent">
                    <controls:SpinnerSwirl x:Name="BackgroundActivity" HorizontalAlignment="Left"
                                           VerticalAlignment="Top" Margin="2,3,0,0" Visibility="Collapsed"/>
                </Grid>
                <Grid HorizontalAlignment="Right" Margin="0 4 0 5" Grid.Column="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="108" />
                        <ColumnDefinition Width="108" />
                        <ColumnDefinition Width="108" />
                        <ColumnDefinition Width="67.13" />
                        <ColumnDefinition Width="40.87" />
                    </Grid.ColumnDefinitions>
                    <Button Content="Download Cache" Click="DoCacheItems" IsDefault="True" Grid.Column="0" Height="24"
                            Margin="5,0,0,0" />
                    <Button Content="Upload Pending" Click="UploadItems" IsDefault="True" Grid.Column="1" Height="24"
                            Margin="5,0,5,0" />
                    <Button Content="Update Catalog" Click="UpdateMediaItems" IsDefault="True" Grid.Column="2"
                            Height="24"
                            Margin="0,0,5,0" />
                    <Button Content="Connect" Click="ConnectToDatabase" IsDefault="True" Grid.Column="3" Height="24"
                            Margin="0,0,5,0" Grid.ColumnSpan="2" />
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>